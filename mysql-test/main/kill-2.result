#
# MDEV-6896 kill user command cause MariaDB crash!
#
create user foo@'127.0.0.1';
connect  con1,127.0.0.1,foo,,;
connection default;
select user from information_schema.processlist;
user
foo
root
kill user foo@'127.0.0.1';
drop user foo@'127.0.0.1';
#
# KILL USER and missing privileges
#
create user a@localhost;
create user b@localhost;
grant process on *.* to a@localhost;
grant select on *.* to b@localhost;
connect a,localhost,a;
show grants;
Grants for a@localhost
GRANT PROCESS ON *.* TO `a`@`localhost`
connect b,localhost,b;
show processlist;
Id	User	Host	db	Command	Time	State	Info	Progress
#	b	localhost	test	#	#	starting	show processlist	#
kill user a;
kill user x;
connection a;
show processlist;
Id	User	Host	db	Command	Time	State	Info	Progress
#	root	localhost	test	#	#	#	#	#
#	a	localhost	NULL	#	#	#	#	#
#	b	localhost	test	#	#	#	#	#
kill user b;
ERROR HY000: Operation KILL USER failed for b@%
connection default;
drop user a@localhost;
drop user b@localhost;
#
# End of 10.3 tests
#
